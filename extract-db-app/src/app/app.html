<div class="container">
  <div class="header">
    <h1>MongoDB Collection Extractor</h1>
    <p>Extract collections from MongoDB and download as JSON</p>
  </div>

  <form [formGroup]="extractionForm" (ngSubmit)="onSubmit()" class="extraction-form">
    <div class="form-group">
      <label for="mongoUri">MongoDB URI</label>
      <input 
        type="text" 
        id="mongoUri" 
        formControlName="mongoUri" 
        placeholder="mongodb://localhost:27017/mydb"
        class="form-control"
      />
      <div class="error" *ngIf="extractionForm.get('mongoUri')?.invalid && extractionForm.get('mongoUri')?.touched">
        MongoDB URI is required
      </div>
    </div>

    <div class="form-group">
      <label for="collectionName">Collection Name</label>
      <input 
        type="text" 
        id="collectionName" 
        formControlName="collectionName" 
        placeholder="users"
        class="form-control"
        [disabled]="extractionForm.get('allCollections')?.value"
      />
      <div class="error" *ngIf="extractionForm.get('collectionName')?.invalid && extractionForm.get('collectionName')?.touched">
        Collection name is required
      </div>
    </div>

    <div class="checkbox-group">
      <label class="checkbox-label">
        <input type="checkbox" formControlName="limitTo3" />
        <span>Extract only 3 random documents</span>
      </label>
      <p class="help-text">Limits the extraction to 3 randomly selected documents from each collection</p>
    </div>

    <div class="checkbox-group">
      <label class="checkbox-label">
        <input type="checkbox" formControlName="allCollections" />
        <span>Extract all collections</span>
      </label>
      <p class="help-text">Extract from all collections in the database (disables collection name field)</p>
    </div>

    <div class="alert alert-error" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="alert alert-success" *ngIf="successMessage">
      {{ successMessage }}
    </div>

    <button 
      type="submit" 
      class="submit-button" 
      [disabled]="extractionForm.invalid || isLoading"
    >
      <span *ngIf="!isLoading">Extract & Download</span>
      <span *ngIf="isLoading">Extracting...</span>
    </button>
  </form>

  <div class="info-box">
    <h3>How it works:</h3>
    <ul>
      <li>Single collection → Downloads a JSON file with the documents</li>
      <li>Multiple collections → Downloads a ZIP file containing one JSON file per collection</li>
      <li>3 documents mode → Randomly selects 3 documents from each collection</li>
      <li>Full extraction → Downloads all documents from the collection(s)</li>
    </ul>
  </div>
</div>
